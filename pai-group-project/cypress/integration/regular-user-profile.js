describe("adding new offer", () => {
    beforeEach(() => {
        cy.clearLocalStorage()
        cy.visit('/')
        cy.contains('Logowanie').click()
        cy.url().should('include', '/logowanie')
        cy.get('input').first().type('wmaterna')
        cy.get('input').eq(1).type('1234')
        cy.get('form').submit()
    })
    it('should edit user info', () => {
        cy.contains('Konto').click()
        cy.contains('Edytuj').click()
        cy.get('button[id=save]').should('exist')
        cy.get('button[id=cancel]').should('exist')
        cy.get('input[id=givenName]').clear()
        cy.get('input[id=givenName]').type('TestName')
        cy.get('input[id=familyName]').clear()
        cy.get('input[id=familyName]').type('TestSurname')
        cy.get('input[id=email]').clear()
        cy.get('input[id=email]').type('test@test.pl')
        cy.get('input[id=phoneNumber]').clear()
        cy.get('input[id=phoneNumber]').type('675453432')
        cy.get('input[id=imageURL]').clear()
        cy.get('input[id=imageURL]').type('https://www.google.com/')
        cy.get('button[id=save]').click()
        cy.get('button[id=save]').should('not.exist')
        cy.get('button[id=cancel]').should('not.exist')
    })

    it('should cancel add info form', () => {
        cy.contains('Konto').click()
        cy.contains('Edytuj').click()
        cy.get('button[id=save]').should('exist')
        cy.get('button[id=cancel]').should('exist')
        cy.get('button[id=cancel]').click()
        cy.get('button[id=cancel]').should('not.exist')
    })
    it('apply for offer from offer page', () => {
        cy.contains('Oferty').click()
        cy.get('button[id=jobOffer]').eq(2).click()
        cy.get('.modal-dialog').should('be.visible')
        cy.contains('Aplikuj').click()
        cy.get('.notification-message').should('exist')
    })

    it('apply for offer from offer company page', () => {
        cy.contains('Firmy').click()
        cy.get('button[id=jobOffer]').first().click()
        cy.url().should('include', '/profil')
        cy.get('td[id=offerId]').first().click()
        cy.get('.modal-dialog').should('be.visible')
        cy.contains('Aplikuj').click()
        cy.get('.notification-message').should('exist')
    })
});